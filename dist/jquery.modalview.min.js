/*! jQuery Modalview - v0.1.0 - 2012-07-16
* https://github.com/bleech/jquery.modalview
* Copyright (c) 2012 bleech; Licensed MIT, GPL */
(function(a,b,c,d){a.fn.modalview=function(b){return b=a.extend({},a.fn.modalview.options,b),this.filter("a").each(function(){var c=a(this);c.data("modalview",new e(c,b))})},a.modalview=function(b,c){return c=a.extend({},a.fn.modalview.options,c),new e(b,c,!0)},a.fn.modalview.options={selector:"#main",closeText:"close",padding:10,width:580,onInit:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){}};var e=function(b,c,d){var e=this,f;this.options=c,this.content="",f='<div class="modalview">',f+='<div class="close">'+this.options.closeText+"</div>",f+='<div class="container"></div>',f+="</div>",this.modalview=a(".modalview").length>0?a(".modalview"):a(f).appendTo("body").hide(),this.container=this.modalview.find(".container"),this.container.css({padding:parseInt(this.options.padding,10)+"px",width:parseInt(this.options.width,10)+"px"}),this.container.css("marginLeft",-1*(this.container.outerWidth()/2)+"px"),d?(this.content=b,this.open()):(a.get(b.attr("href"),function(b){e.content=a("<div>").append(b.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).find(e.options.selector).html()}),b.on("click",function(a){a.preventDefault(),e.open()})),this.modalview.on("click",".close",a.proxy(this.close,this)),this.options.onInit.call(this)};e.prototype.open=function(){this.container.html(this.content),this.modalview.show(),this.options.onOpen.call(this)},e.prototype.close=function(){this.modalview.hide(),this.modalview.off(),this.container.html(""),this.options.onClose.call(this)},e.prototype.destroy=function(){this.modalview.off(),this.modalview.remove(),this.options.onDestroy.call(this)}})(jQuery,window,document);