/*! jQuery Modalview - v0.2.0 - 2014.2.19
* https://github.com/bleech/jquery.modalview
* Copyright (c) 2014.2.19 bleech Licensed MIT, GPL */
!function(t,i,o){t.fn.modalview=function(i){return i=t.extend({},t.fn.modalview.options,i),this.filter("a").each(function(){var o=t(this);o.data("modalview",new e(o,i))})},t.modalview=function(i,o){return o=t.extend({},t.fn.modalview.options,o),new e(i,o,!0)},t.fn.modalview.options={selector:"#main",closeText:"close",padding:10,width:580,onInit:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){}};var e=function(i,o,e){var n,s=this;this.options=o,this.content="",n='<div class="modalview">',n+='<div class="close">'+this.options.closeText+"</div>",n+='<div class="container"></div>',n+="</div>",this.modalview=t(".modalview").length>0?t(".modalview"):t(n).appendTo("body").hide(),this.container=this.modalview.find(".container"),this.container.css({padding:parseInt(this.options.padding,10)+"px",width:parseInt(this.options.width,10)+"px"}),this.container.css("marginLeft",-1*(this.container.outerWidth()/2)+"px"),e?(this.content=i,this.open()):(this.elem=i,t.get(i.attr("href"),function(i){s.content="object"==typeof i?t("<div>").append(i.content):t("<div>").append(i.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).find(s.options.selector).html()}),i.on("click",function(t){t.preventDefault(),s.open()})),this.modalview.on("click",".close",t.proxy(this.close,this)),this.options.onInit.call(this)};e.prototype.addCustomClass=function(){this.modalview.removeClass().addClass("modalview"),this.elem&&this.elem.data("modalclass")&&this.elem.data("modalclass").length>0&&this.modalview.addClass(this.elem.data("modalclass"))},e.prototype.jumpToHashElement=function(){if(this.elem){var t=this.elem.attr("href").split("#")[1];t?o.getElementById(t).scrollIntoView(!0):(this.container.scrollTop(0),this.container.animate({scrollTop:0},0))}},e.prototype.open=function(){this.container.html(this.content),this.addCustomClass(),this.modalview.show(),this.jumpToHashElement(),this.options.onOpen.call(this)},e.prototype.close=function(){this.modalview.hide(),this.modalview.off(),this.container.html(""),this.options.onClose.call(this)},e.prototype.destroy=function(){this.modalview.off(),this.modalview.remove(),this.options.onDestroy.call(this)}}(jQuery,window,document);