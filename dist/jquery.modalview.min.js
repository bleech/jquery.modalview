/*! jQuery Modalview - v0.2 - 2012-11-02
* https://github.com/bleech/jquery.modalview
* Copyright (c) 2012 bleech; Licensed MIT, GPL */
(function(e,t,n,r){e.fn.modalview=function(t){return t=e.extend({},e.fn.modalview.options,t),this.filter("a").each(function(){var n=e(this);n.data("modalview",new i(n,t))})},e.modalview=function(t,n){return n=e.extend({},e.fn.modalview.options,n),new i(t,n,!0)},e.fn.modalview.options={selector:"#main",closeText:"close",padding:10,width:580,onInit:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){}};var i=function(t,n,r){var i=this,s;this.options=n,this.content="",s='<div class="modalview">',s+='<div class="close">'+this.options.closeText+"</div>",s+='<div class="container"></div>',s+="</div>",this.modalview=e(".modalview").length>0?e(".modalview"):e(s).appendTo("body").hide(),this.container=this.modalview.find(".container"),this.container.css({padding:parseInt(this.options.padding,10)+"px",width:parseInt(this.options.width,10)+"px"}),this.container.css("marginLeft",-1*(this.container.outerWidth()/2)+"px"),r?(this.content=t,this.open()):(this.elem=t,e.get(t.attr("href"),function(t){i.content=e("<div>").append(t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).find(i.options.selector).html()}),t.on("click",function(e){e.preventDefault(),i.open()})),this.modalview.on("click",".close",e.proxy(this.close,this)),this.options.onInit.call(this)};i.prototype.addCustomClass=function(){this.modalview.removeClass().addClass("modalview"),this.elem&&this.elem.data("modalclass")&&this.elem.data("modalclass").length>0&&this.modalview.addClass(this.elem.data("modalclass"))},i.prototype.jumpToHashElement=function(){if(this.elem){var e=this.elem.attr("href").split("#")[1];e?n.getElementById(e).scrollIntoView(!0):(this.container.scrollTop(0),this.container.animate({scrollTop:0},0))}},i.prototype.open=function(){this.container.html(this.content),this.addCustomClass(),this.modalview.show(),this.jumpToHashElement(),this.options.onOpen.call(this)},i.prototype.close=function(){this.modalview.hide(),this.modalview.off(),this.container.html(""),this.options.onClose.call(this)},i.prototype.destroy=function(){this.modalview.off(),this.modalview.remove(),this.options.onDestroy.call(this)}})(jQuery,window,document);